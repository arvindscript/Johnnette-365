!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}({0:function(e,t,n){"use strict";n.d(t,"n",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"o",(function(){return y})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return x})),n.d(t,"h",(function(){return w}));var a=n(5),r=n.n(a);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e,t){t?window.sessionStorage.setItem(e,JSON.stringify(t)):window.sessionStorage.setItem(e,void 0)},s=function(e){return window.sessionStorage.getItem(e)},u=function(e){return window.sessionStorage.removeItem(e)},l=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}},d=function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},m=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},p=function(e,t){var n=document.head,a=document.body.getElementsByTagName("footer")[0],r=document.createElement("link");r.rel="stylesheet",r.href=e,"footer"===t?a.appendChild(r):n.appendChild(r)};function f(e){var t,n=window.getComputedStyle(e),a=n.display,r=n.position,i=n.visibility,o=n.maxHeight.replace("px","").replace("%","");return"none"!==a&&"0"!==o?e.offsetHeight:(e.style.position="absolute",e.style.visibility="hidden",e.style.display="block",t=e.offsetHeight,e.style.display=a,e.style.position=r,e.style.visibility=i,t)}function v(e,t){e&&t&&!e.classList.contains(t)&&e.classList.add(t)}function g(e,t){e&&t&&e.classList.contains(t)&&e.classList.remove(t)}function y(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}function h(e){e||(e=window.location.href);var t={},n=e.split("?");if(!(n.length>1))return{};var a=n[1].split("&");return a.length?(a.map((function(e){var n=e.split("="),a=n[0],i=n[1],c=r()({},a,i);t=o(o({},t),c)})),t):void 0}function b(e,t,n){t=t||"d-M-Y",n=n||"-";var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(null!=e){var r=new Date(e);switch(t){case"d-M-Y":case"d M Y":r=r.getDate()+n+a[r.getMonth()]+n+r.getFullYear();break;case"d M":r=r.getDate()+n+a[r.getMonth()];break;case"M Y":r=a[r.getMonth()]+n+r.getFullYear();break;case"d":r=r.getDate();break;case"M":r=a[r.getMonth()];break;case"M d Y":r=a[r.getMonth()]+n+r.getDate()+n+r.getFullYear();break;case"Y-m-d":r=r.getFullYear()+n+r.getMonth()+n+r.getDate();break;default:r=r.getDate()+n+a[r.getMonth()]+n+r.getFullYear()}return r.toString()}return null}function x(e){try{return JSON.parse(e)}catch(e){return}}function w(e,t,n,a){if(void 0===e)return"";var r=a?a.split(":"):[0,0,0,0],i=new Date,o=new Date(e),c=r[2];c.indexOf("+")?"0000"==(c=r[2].split("+"))[1]&&(r[0]=Number(r[0])+5,r[1]=Number(r[1])+30):"0530"==(c=r[2].split("-"))[1]&&(r[0]=Number(r[0])+11,r[1]=Number(r[1])),o=new Date(o.setHours(Number(r[0]),Number(r[1]),Number(c[0]),0));var s=Math.abs(o.getTime()-i.getTime()),u=Math.ceil(s/36e5),l="";if(isNaN(u))return o;if(!(u>24)){var d=(new Date).getHours()+":"+(new Date).getMinutes();return function(e,t){e=e.split(":"),t=t.split(":");var n=new Date(0,0,0,e[0],e[1],0),a=new Date(0,0,0,t[0],t[1],0).getTime()-n.getTime(),r=Math.floor(a/1e3/60/60);a-=1e3*r*60*60;var i=Math.floor(a/1e3/60);r<0&&(r+=24);return r<=0?0===i?"a few seconds ago":1===i?i+" minute ago":i+" minutes ago":1===r?r+" hour ago":r+" hours ago"}(r[0]+":"+r[1],d)}switch(u=Math.floor(u/24)){case 0:l="Today";break;case 1:l="Yesterday";break;default:l=(l=u<30?u+" days ago":""+b(o,void 0," ")).replace("Posted on","")}return l}},20:function(e,t,n){n(21),e.exports=n(22)},21:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0);function i(){var e=a.b.links+"editor/assets/css/ce-editor.css";try{Object(r.b)(e)}catch(e){console.log("during injection of dependency file failed in editor.")}}window.centralServiceTextEditor={commentRichTextEditor:function(){var e,t=a.b.editor,n=new Event("search");function r(e){if(e.preventDefault(),document.querySelector("#uploadImage").value){var n=document.getElementById("uploadImage").files[0],a=new FormData;a.append("file",n),fetch("".concat(t,"api/storage/upload/"),{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){var t=document.querySelector(".editor .text-content"),n=t.querySelector(".attach-img"),a=document.createElement("li");a.className="attach-child-item";var r=document.createElement("img");r.src=e.url,r.alt="Images to uload";var i=document.createElement("span");if(a.appendChild(i),i.addEventListener("click",o),a.appendChild(r),n)n.appendChild(a);else{var c=function(){var e=document.createElement("ul");return e.className="attach-img",e}();c.appendChild(a),t.appendChild(c)}}))}}function o(e){e.preventDefault();var t=this.closest(".attach-child-item");t.closest(".attach-img").removeChild(t)}function c(){try{e.querySelector("#uploadImage").click()}catch(e){}}function s(e){e.preventDefault(),e.stopPropagation();var t=e.target,n=t.dataset.value;document.execCommand(n,!1,null),document.querySelector("#id_ce_text_editor .c-editsummary").focus(),document.queryCommandState(n)?t.classList.add("active-txt-style"):t.classList.remove("active-txt-style")}function u(){var e=document.queryCommandState("bold"),t=document.queryCommandState("italic"),n=document.queryCommandState("underline"),a=this.previousElementSibling;if(a){var r=a.querySelector(".bold-txt"),i=a.querySelector(".itelic-txt"),o=a.querySelector(".underline-txt");e&&!r.classList.contains("active-txt-style")?r.classList.add("active-txt-style"):e||r.classList.remove("active-txt-style"),t&&!i.classList.contains("active-txt-style")?i.classList.add("active-txt-style"):t||i.classList.remove("active-txt-style"),n&&!o.classList.contains("active-txt-style")?o.classList.add("active-txt-style"):n||o.classList.remove("active-txt-style")}}function l(e){var t;e.stopPropagation(),e.preventDefault(),t=(e.clipboardData||window.clipboardData).getData("Text"),window.document.execCommand("insertText",!1,t)}function d(e){e.target.innerText;e.target.dispatchEvent(n)}return i(),{createTextEditor:function(t,n){var a=e=t||document.querySelector(".editor-box"),i=document.createElement("div");i.id="id_ce_text_editor",i.className="editor",i.oninput=d,i.appendChild(function(e){var t=document.createElement("div");return t.className="text-content",t.appendChild(function(e){e=[1,2,3];var t=document.createElement("div");return t.className="tag-style-editor",t.style.display="none",e.map((function(e,n){var a=document.createElement("span");a.className="tagging-item ".concat(1===n?"active-txt-style":""),a.innerText=e,t.appendChild(a)})),t}()),t.appendChild(function(){var e=document.createElement("div"),t=document.queryCommandState("bold"),n=document.queryCommandState("italic"),a=document.queryCommandState("underline");e.className="text-style-editor",e.innerHTML='\n                        <button class="bold-txt '.concat(t?"active-txt-style":"",'" data-value="bold">B</button>\n                        <button class="itelic-txt ').concat(n?"active-txt-style":"",'"  data-value="italic">I</button>\n                        <button class="underline-txt ').concat(a?"active-txt-style":"",'" data-value="underline">U</button>\n                        '),e.onclick=s;var r=document.createElement("div");return r.className="ins-img",r.innerText="Insert Photo",r.addEventListener("click",c),e.appendChild(r),e}()),t.appendChild(function(e){var t=document.createElement("p");t.className="c-editsummary",t.contentEditable=!0,e&&(t.innerHTML=e);return t.addEventListener("click",u),t.addEventListener("paste",l),t}(e)),t}(n));var o=document.createElement("div");o.className="ce_error_msg",a.appendChild(i),a.appendChild(o),a.appendChild(function(){var e=document.createElement("div");e.className="btn-box",e.innerHTML='<div class="cancel-btn">Cancel</div>\n                            <div id="header-comment-btn" class="edit-comment">Edit Comment </div>\n                            <a href="/subscribe/" target="_self" id="subscribe-comment-btn" class="subscribe-comment">Comment</a>';var t=e.querySelector(".cancel-btn");return e.insertBefore(function(){var e=document.createElement("div");return e.className="anonymous-check",e.innerHTML='<label>\n                        <input type="checkbox" name="asAnonymous" id="id_anonymous">\n                        <span class="checkmark"></span>As Anonymous</label>\n                        ',e}(),t),e}());var m=document.createElement("input");m.type="file",m.className="hide-visibility",m.id="uploadImage",m.onchange=r,m.name="uploadImage",m.accept="image/png, image/jpeg, image/svg",a.appendChild(m),function(){var e=document.queryCommandState("bold"),t=document.queryCommandState("italic"),n=document.queryCommandState("underline");e&&document.execCommand("bold");t&&document.execCommand("italic");n&&document.execCommand("underline")}()},removeImages:o}}}},22:function(e,t,n){},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a={comment:"https://comment-engine.indianexpress.com/",auth:"https://authentication.indianexpress.com/",links:"https://media-central.indianexpress.com/static/comment-engine/",images:"https://media-central.indianexpress.com/static/comment-engine/assets/",js:"https://media-central.indianexpress.com/static/comment-engine/",profanity:"https://profanity-filter.indianexpress.com/",blockedurl:"https://ecoprod.xpresstechie.com/article/"},r={editor:"https://comment-engine.indianexpress.com/",auth:"https://authentication.indianexpress.com/",links:"https://media-central.indianexpress.com/static/comment-engine/",images:"https://media-central.indianexpress.com/static/comment-engine/assets/",js:"https://media-central.indianexpress.com/static/comment-engine/"}},5:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}});
//# sourceMappingURL=editor.js.map